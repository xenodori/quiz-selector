<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>êµ¬ë§¤ëŒ€í–‰ í•™ìŠµ ë£¨íŠ¸ ì¶”ì²œ</title>
  <style>
    :root{
      --bg:#0b0b0e; --card:#121219; --muted:#9ea3af; --text:#f5f7fa;
      --accent:#67e8f9; --accent2:#22c55e; --ring:rgba(103,232,249,.3);
      --shadow:0 8px 30px rgba(0,0,0,.35); --radius:18px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 600px at 80% -10%, #133, transparent),
                 radial-gradient(900px 500px at -10% 110%, #143, transparent), var(--bg);
      color:var(--text); font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Apple SD Gothic Neo, Helvetica, Arial, "ë§‘ì€ ê³ ë”•", "Malgun Gothic", sans-serif;
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:100%; max-width:760px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      backdrop-filter:saturate(120%) blur(6px);
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius); box-shadow:var(--shadow); padding:28px;
    }
    .pill{display:inline-flex;align-items:center;gap:8px;background:rgba(103,232,249,.12);
      border:1px solid var(--ring);color:#d1fdff;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700}
    .title{font-size:28px;font-weight:800;letter-spacing:-.3px;margin:8px 0 6px}
    .desc{margin:0 0 18px;color:var(--muted);line-height:1.5}
    .progress{height:6px;background:#1e1e28;border-radius:999px;overflow:hidden;margin:12px 0 22px}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#93c5fd);transition:width .35s ease}
    .opts{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    .opt{
      border:1px solid rgba(255,255,255,.08);background:var(--card);color:var(--text);
      padding:16px 14px;border-radius:14px;text-align:center;cursor:pointer;
      font-weight:700;letter-spacing:-.2px;transition:transform .1s ease,box-shadow .2s ease,border-color .2s ease;outline:none;
    }
    .opt:hover,.opt:focus{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.35);border-color:var(--ring)}
    .row-1{grid-template-columns:1fr}
    .actions{display:flex;gap:10px;margin-top:18px;flex-wrap:wrap}
    .btn{border:none;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer;background:#2a2a36;color:var(--text)}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,.12)}
    .btn-cta{background:var(--accent2);color:#00110a;text-decoration:none;display:inline-block}
    .result{display:grid;gap:12px;grid-template-columns:1fr;margin-top:10px}
    .result .headline{font-size:22px;font-weight:900;margin:.2rem 0}
    .result p{margin:.2rem 0 .6rem;color:var(--muted);line-height:1.6}
    .path{margin-top:8px;padding:10px 12px;border-radius:12px;background:#0f1320;border:1px dashed rgba(255,255,255,.12);color:#cbd5e1;font-size:13px}
    .small{font-size:12px;color:#9aa0aa}
    @media (max-width:640px){.opts{grid-template-columns:1fr}.title{font-size:24px}}
  </style>
</head>
<body>
  <main class="app">
    <section class="card" aria-live="polite">
      <div class="pill">ğŸ§­ ë‚´ê²Œ ë§ëŠ” êµ¬ë§¤ëŒ€í–‰ í•™ìŠµ ë£¨íŠ¸</div>
      <h1 class="title" id="qTitle">êµ¬ë§¤ëŒ€í–‰ ê²½í—˜ì´ ìˆë‚˜ìš”?</h1>
      <p class="desc" id="qDesc">3~5ë¬¸í•­ì— ë‹µí•˜ë©´ ë§ì¶¤ ì¶”ì²œê³¼ ìë£Œ ë§í¬ê°€ ì œê³µë©ë‹ˆë‹¤.</p>

      <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>

      <div id="options" class="opts"></div>

      <div class="actions">
        <button class="btn btn-ghost" id="backBtn" disabled>â† ì´ì „</button>
        <button class="btn" id="restartBtn">ì²˜ìŒë¶€í„°</button>
      </div>

      <div id="result" class="result" hidden></div>
      <div id="path" class="path small" hidden></div>
    </section>
  </main>

  <script>
    // ========== 1) íŠ¸ë¦¬ ì •ì˜ (ì œë…¸ë‹˜ ìš”êµ¬ì‚¬í•­ ë°˜ì˜) ==========
    const TREE = {
      start: "q_exp",
      nodes: {
        // ì²« ì§ˆë¬¸: ê²½í—˜ ìœ ë¬´
        q_exp: {
          title: "êµ¬ë§¤ëŒ€í–‰ ê²½í—˜ì´ ìˆë‚˜ìš”?",
          desc: "",
          options: [
            { label: "ìˆë‹¤", next: "q_mode" },
            { label: "ì—†ë‹¤", next: "q_noexp_state" }
          ]
        },
        // ê²½í—˜ ìˆë‹¤ â†’ ìˆ˜ë™/ë°˜ìë™
        q_mode: {
          title: "í˜„ì¬ ìš´ì˜ ë°©ì‹ì€ ë¬´ì—‡ì¸ê°€ìš”?",
          desc: "",
          options: [
            { label: "ìˆ˜ë™", next: "q_term" },
            { label: "ë°˜ìë™", next: "q_term" }
          ]
        },
        // ìˆ˜ë™/ë°˜ìë™ ê³µí†µ â†’ ê¸°ê°„
        q_term: {
          title: "ìš´ì˜ ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ë˜ì—ˆë‚˜ìš”?",
          desc: "",
          options: [
            { label: "6ê°œì›” ì´í•˜", result: "seller_maker" },
            { label: "6ê°œì›” ì´ìƒ", result: "vod_advanced" }
          ]
        },
        // ê²½í—˜ ì—†ë‹¤ â†’ ê´€ì‹¬ë§Œ ìˆë‹¤/ì‹œì‘í•  ì˜ˆì •ì´ë‹¤
        q_noexp_state: {
          title: "í˜„ì¬ ìƒíƒœë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.",
          desc: "",
          options: [
            { label: "ê´€ì‹¬ë§Œ ìˆë‹¤", result: "book_reco" },
            { label: "ì‹œì‘í•  ì˜ˆì •ì´ë‹¤", next: "q_start_plan" }
          ]
        },
        // ì‹œì‘í•  ì˜ˆì •ì´ë‹¤ â†’ í˜¼ìì„œ/ì–´ë µë‹¤
        q_start_plan: {
          title: "ì–´ë–»ê²Œ ì§„í–‰í•˜ê³  ì‹¶ë‚˜ìš”?",
          desc: "",
          options: [
            { label: "í˜¼ìì„œ í• ë˜ìš”", result: "vod_basic" },
            { label: "í˜¼ìì„œëŠ” ì–´ë ¤ì›Œìš”", result: "seller_maker" }
          ]
        }
      }
    };

    // ========== 2) ê²°ê³¼ ì¹´ë“œ ========== 
    const RESULTS = {
      seller_maker: {
        title: "ì¶”ì²œ: ì…€ëŸ¬ë©”ì´ì»¤ (ì‹¤ìŠµ ë£¨í‹´ í”„ë¡œê·¸ë¨)",
        body: "ì£¼ì°¨ë³„ ì‹¤ìŠµÂ·ìƒì„¸í˜ì´ì§€ í”¼ë“œë°±Â·ê²€ìƒ‰ë…¸ì¶œ ì²´í¬ë¦¬ìŠ¤íŠ¸Â·ì „ë¬¸ ì½”ì¹˜ë“¤ê³¼ â€˜ì²« ë§¤ì¶œâ€™ì„ ê°€ì¥ ë¹ ë¥´ê²Œ ë§Œë“­ë‹ˆë‹¤.",
        ctas: [
          { label: "ì…€ëŸ¬ë©”ì´ì»¤ ìì„¸íˆ ë³´ê¸°", href: "https://cafe.naver.com/travelceo/57125" }
        ]
      },
      vod_advanced: {
        title: "ì¶”ì²œ: ì‹¬í™” ê°•ì˜",
        body: "6ê°œì›” ì´ìƒ ìš´ì˜ìë¼ë©´ â€˜ê²€ìƒ‰ë˜ëŠ” ìƒì„¸í˜ì´ì§€, ì¹´íƒˆë¡œê·¸/ì˜µì…˜/ê°€ê²© ì „ëµâ€™ìœ¼ë¡œ íŒë§¤ë¥¼ ê·¹ëŒ€í™” í•˜ê³  ë§ˆì§„ì„ ë†’ì—¬ë³´ì„¸ìš”.",
        ctas: [
          { label: "ì‹¬í™” ê°•ì˜ ë°”ë¡œê°€ê¸°", href: "https://www.travelceo.co.kr/cu/kfdX2USD" }
        ]
      },
      book_reco: {
        title: "ì¶”ì²œ: êµ¬ë§¤ëŒ€í–‰ ì±…",
        body: "ê´€ì‹¬ ë‹¨ê³„ì—ì„  ê°œë…ì„ í•œë²ˆì— ì¡ëŠ” ê²Œ ìµœìš°ì„ ì…ë‹ˆë‹¤. íë¦„(ì†Œì‹±â†’ë“±ë¡â†’ë…¸ì¶œâ†’íŒë§¤â†’ëŒ€ì‘)ì„ ì±…ìœ¼ë¡œ ë¹ ë¥´ê²Œ ìµíˆì„¸ìš”.",
        ctas: [
          { label: "ë„ì„œ ì•ˆë‚´ ë³´ê¸°", href: "https://search.shopping.naver.com/book/catalog/51231446621" }
        ]
      },
      vod_basic: {
        title: "ì¶”ì²œ: ê¸°ì´ˆ VOD ê°•ì˜",
        body: "í˜¼ì ì‹œì‘í•  ë¶„ë“¤ì„ ìœ„í•´ í•µì‹¬ ê°œë…ê³¼ ì‹¤ìŠµ ë™ì„ ì„ ì™„ë²½í•˜ê²Œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.",
        ctas: [
          { label: "ê¸°ì´ˆ VOD ë³´ëŸ¬ê°€ê¸°", href: "https://www.travelceo.co.kr/cu/2xRPDZMk" }
        ]
      }
    };

    // ========== 3) ìƒíƒœ/ë Œë”ëŸ¬ ==========
    const $title = document.getElementById("qTitle");
    const $desc = document.getElementById("qDesc");
    const $opts = document.getElementById("options");
    const $bar = document.getElementById("bar");
    const $result = document.getElementById("result");
    const $path = document.getElementById("path");
    const $back = document.getElementById("backBtn");
    const $restart = document.getElementById("restartBtn");

    // ìŠ¤íƒ: ì§ˆë¬¸ ID ìˆœì„œ
    const questionStack = [];
    // ì„ íƒ ê¸°ë¡(ë¼ë²¨ë§Œ)
    const picks = [];

    function setProgress(){
      // ëŒ€ëµ 3~4 ìŠ¤í… â†’ 0~100%
      const maxSteps = 4;
      const pct = Math.min(100, Math.round((Math.max(1, questionStack.length) / maxSteps) * 100));
      $bar.style.width = pct + "%";
    }

    function updatePath(){
      const crumbs = picks.join(" â†’ ");
      if(crumbs){
        $path.hidden = false;
        $path.textContent = "ì„ íƒ ê²½ë¡œ: " + crumbs;
      }else{
        $path.hidden = true;
        $path.textContent = "";
      }
    }

    function renderQuestion(qid){
      const node = TREE.nodes[qid];
      if(!node) return;

      if(questionStack[questionStack.length - 1] !== qid){
        questionStack.push(qid);
      }

      $result.hidden = true;
      $opts.innerHTML = "";
      $title.textContent = node.title;
      $desc.textContent = node.desc || "";
      $opts.classList.toggle("row-1", node.options.length === 1);

      node.options.forEach((opt, idx) => {
        const b = document.createElement("button");
        b.className = "opt";
        b.textContent = opt.label;
        b.addEventListener("click", () => handlePick(opt));
        $opts.appendChild(b);
        if(idx===0) b.focus();
      });

      $back.disabled = questionStack.length <= 1 && picks.length === 0;
      setProgress();
      updatePath();
    }

    function showResult(key){
      const r = RESULTS[key];
      if(!r) return;

      $title.textContent = "ë§ì¶¤ ê²°ê³¼";
      $desc.textContent = "ì•„ë˜ ì¶”ì²œì„ í™•ì¸í•˜ì„¸ìš”.";
      $opts.innerHTML = "";
      $result.hidden = false;
      $result.innerHTML = `
        <div class="headline">âœ… ${r.title}</div>
        <p>${r.body}</p>
      `;

      const btnWrap = document.createElement("div");
      btnWrap.className = "actions";
      r.ctas.forEach(cta => {
        const a = document.createElement("a");
        a.href = cta.href;
        a.target = "_blank"; a.rel = "noopener";
        a.className = "btn btn-cta";
        a.textContent = cta.label;
        btnWrap.appendChild(a);
      });
      $result.appendChild(btnWrap);

      // ê²°ê³¼ëŠ” ì§„í–‰ë¥  100%
      $bar.style.width = "100%";
      $back.disabled = questionStack.length === 0;
      updatePath();
    }

    function handlePick(opt){
      picks.push(opt.label);

      if(opt.result){
        showResult(opt.result);
      } else if(opt.next){
        renderQuestion(opt.next);
      }
      updatePath();
    }

    // ========== 4) ë’¤ë¡œê°€ê¸° / ì²˜ìŒë¶€í„° ==========
    $back.addEventListener("click", () => {
      // ê²°ê³¼ í™”ë©´ì´ë˜ ì§ˆë¬¸ í™”ë©´ì´ë˜ ê³µí†µ ì²˜ë¦¬: ë§ˆì§€ë§‰ ì„ íƒ ì œê±°
      if(picks.length > 0) picks.pop();
      // í˜„ì¬ ì§ˆë¬¸ pop (ë˜ëŠ” ê²°ê³¼ì—ì„œ ì´ì „ ì§ˆë¬¸ìœ¼ë¡œ)
      if(questionStack.length > 1){
        questionStack.pop();
        const prevQ = questionStack[questionStack.length - 1];
        renderQuestion(prevQ);
      }else{
        // ì‹œì‘ìœ¼ë¡œ
        resetAll();
      }
      updatePath();
    });

    function resetAll(){
      questionStack.length = 0;
      picks.length = 0;
      $result.hidden = true;
      $path.hidden = true;
      renderQuestion(TREE.start);
      $bar.style.width = "0%";
    }

    $restart.addEventListener("click", resetAll);

    // ì´ˆê¸° ì‹œì‘
    resetAll();

    // ì ‘ê·¼ì„±: ESCë¡œ ë¦¬ì…‹
    document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") resetAll(); });
  </script>
</body>
</html>
